{"version":3,"sources":["../../test/all_reporters.js"],"names":["_lodash","require","_lodash2","_interopRequireDefault","_chai","_composite_reporter","_composite_reporter2","_in_memory_reporter","_in_memory_reporter2","_noop_reporter","_noop_reporter2","_remote_reporter","_remote_reporter2","_udp_sender","_udp_sender2","_mock_logger","_mock_logger2","_logging_reporter","_logging_reporter2","_sinon","_sinon2","obj","__esModule","default","describe","reporters","beforeEach","loggingReporter","inMemoryReporter","setProcess","noopReporter","sender","_process","remoteReporter","it","compositeReporter","assert","equal","name","closeOptions","callback","spy","predicate","calledOnce","each","o","reporter","close","isOk","logger","spanMock","key","report","_infoMsgs","mockReporter"],"mappings":"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","file":"all_reporters.js","sourcesContent":["'use strict';\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _chai = require('chai');\n\nvar _composite_reporter = require('../src/reporters/composite_reporter');\n\nvar _composite_reporter2 = _interopRequireDefault(_composite_reporter);\n\nvar _in_memory_reporter = require('../src/reporters/in_memory_reporter');\n\nvar _in_memory_reporter2 = _interopRequireDefault(_in_memory_reporter);\n\nvar _noop_reporter = require('../src/reporters/noop_reporter');\n\nvar _noop_reporter2 = _interopRequireDefault(_noop_reporter);\n\nvar _remote_reporter = require('../src/reporters/remote_reporter');\n\nvar _remote_reporter2 = _interopRequireDefault(_remote_reporter);\n\nvar _udp_sender = require('../src/reporters/udp_sender');\n\nvar _udp_sender2 = _interopRequireDefault(_udp_sender);\n\nvar _mock_logger = require('./lib/mock_logger');\n\nvar _mock_logger2 = _interopRequireDefault(_mock_logger);\n\nvar _logging_reporter = require('../src/reporters/logging_reporter');\n\nvar _logging_reporter2 = _interopRequireDefault(_logging_reporter);\n\nvar _sinon = require('sinon');\n\nvar _sinon2 = _interopRequireDefault(_sinon);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\ndescribe('All Reporters should', function () {\n    var reporters = void 0;\n    beforeEach(function () {\n        var loggingReporter = new _logging_reporter2.default();\n        var inMemoryReporter = new _in_memory_reporter2.default();\n        inMemoryReporter.setProcess('service-name', []);\n        var noopReporter = new _noop_reporter2.default();\n        var sender = new _udp_sender2.default();\n        sender.setProcess(inMemoryReporter._process);\n        var remoteReporter = new _remote_reporter2.default(sender);\n        reporters = [loggingReporter, inMemoryReporter, noopReporter, remoteReporter];\n    });\n\n    it('have proper names', function () {\n        var loggingReporter = new _logging_reporter2.default();\n        var inMemoryReporter = new _in_memory_reporter2.default();\n        inMemoryReporter.setProcess('service-name', []);\n        var noopReporter = new _noop_reporter2.default();\n        var remoteReporter = new _remote_reporter2.default(new _udp_sender2.default());\n        var compositeReporter = new _composite_reporter2.default();\n\n        _chai.assert.equal(loggingReporter.name(), 'LoggingReporter');\n        _chai.assert.equal(inMemoryReporter.name(), 'InMemoryReporter');\n        _chai.assert.equal(noopReporter.name(), 'NoopReporter');\n        _chai.assert.equal(remoteReporter.name(), 'RemoteReporter');\n        _chai.assert.equal(compositeReporter.name(), 'CompositeReporter');\n    });\n\n    var closeOptions = [{ callback: _sinon2.default.spy(), predicate: function predicate(spy) {\n            return spy.calledOnce === true;\n        } }, { callback: null, predicate: function predicate(spy) {\n            return true;\n        } }];\n\n    _lodash2.default.each(closeOptions, function (o) {\n        it('calls to close execute callback correctly', function () {\n            var reporter = new _composite_reporter2.default(reporters);\n\n            reporter.close(o.callback);\n\n            _chai.assert.isOk(o.predicate(o.callback));\n        });\n    });\n\n    describe('Logging reporter', function () {\n        it('report span logs span as a stringified object', function () {\n            var logger = new _mock_logger2.default();\n            var reporter = new _logging_reporter2.default(logger);\n            var spanMock = { key: 'some-span' };\n\n            reporter.report(spanMock);\n\n            _chai.assert.equal(logger._infoMsgs[0], 'Reporting span {\"key\":\"some-span\"}');\n        });\n    });\n\n    describe('Composite reporter', function () {\n        it('should report spans', function () {\n            var mockReporter = {\n                report: _sinon2.default.spy()\n            };\n            var reporter = new _composite_reporter2.default([mockReporter]);\n            reporter.report();\n\n            _chai.assert.isOk(mockReporter.report.calledOnce);\n        });\n    });\n});\n//# sourceMappingURL=all_reporters.js.map"]}