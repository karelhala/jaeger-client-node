{"version":3,"sources":["../../src/util.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_xorshift","require","_xorshift2","_interopRequireDefault","_nodeInt","_nodeInt2","_os","_os2","obj","__esModule","default","_classCallCheck","instance","TypeError","Utils","startsWith","text","prefix","indexOf","getRandom64","randint","randomint","buf","Buffer","writeUInt32BE","encodeInt64","numberValue","toBuffer","ipToInt","ip","ipl","parts","split","parseInt","signedLimit","removeLeadingZeros","input","counter","charAt","substring","myIp","ifaces","networkInterfaces","keys","loop1","iface","j","family","internal","address","clone","newObj","hasOwnProperty","convertObjectToTags","dict","tags","push"],"mappings":"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","file":"util.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nvar _xorshift = require('xorshift');\n\nvar _xorshift2 = _interopRequireDefault(_xorshift);\n\nvar _nodeInt = require('node-int64');\n\nvar _nodeInt2 = _interopRequireDefault(_nodeInt);\n\nvar _os = require('os');\n\nvar _os2 = _interopRequireDefault(_os);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\nvar Utils = function () {\n    function Utils() {\n        _classCallCheck(this, Utils);\n    }\n\n    _createClass(Utils, null, [{\n        key: 'startsWith',\n\n        /**\n         * Determines whether a string contains a given prefix.\n         *\n         * @param {string} text - the string for to search for a prefix\n         * @param {string} prefix - the prefix to search for in the text given.\n         * @return {boolean} - boolean representing whehter or not the\n         * string contains the prefix.\n         **/\n        value: function startsWith(text, prefix) {\n            return text.indexOf(prefix) === 0;\n        }\n\n        /**\n         * Determines whether a string contains a given prefix.\n         *\n         * @return {Buffer}  - returns a buffer representing a random 64 bit\n         * number.\n         **/\n\n    }, {\n        key: 'getRandom64',\n        value: function getRandom64() {\n            var randint = _xorshift2.default.randomint();\n            var buf = new Buffer(8);\n            buf.writeUInt32BE(randint[0], 0);\n            buf.writeUInt32BE(randint[1], 4);\n            return buf;\n        }\n\n        /**\n         * @param {string|number} numberValue - a string or number to be encoded\n         * as a 64 bit byte array.\n         * @return {Buffer} - returns a buffer representing the encoded string, or number.\n         **/\n\n    }, {\n        key: 'encodeInt64',\n        value: function encodeInt64(numberValue) {\n            return new _nodeInt2.default(numberValue).toBuffer();\n        }\n\n        /**\n         * @param {string} ip - a string representation of an ip address.\n         * @return {number} - a 32-bit number where each byte represents an\n         * octect of an ip address.\n         **/\n\n    }, {\n        key: 'ipToInt',\n        value: function ipToInt(ip) {\n            var ipl = 0;\n            var parts = ip.split('.');\n            if (parts.length != 4) {\n                return null;\n            }\n\n            for (var i = 0; i < parts.length; i++) {\n                ipl <<= 8;\n                ipl += parseInt(parts[i], 10);\n            }\n\n            var signedLimit = 0x7fffffff;\n            if (ipl > signedLimit) {\n                return (1 << 32) - ipl;\n            }\n            return ipl;\n        }\n\n        /**\n         * @param {string} input - the input for which leading zeros should be removed.\n         * @return {string} - returns the input string without leading zeros.\n         **/\n\n    }, {\n        key: 'removeLeadingZeros',\n        value: function removeLeadingZeros(input) {\n            var counter = 0;\n            var length = input.length - 1;\n            for (var i = 0; i < length; i++) {\n                if (input.charAt(i) === '0') {\n                    counter++;\n                } else {\n                    break;\n                }\n            }\n\n            return input.substring(counter);\n        }\n    }, {\n        key: 'myIp',\n        value: function myIp() {\n            var myIp = '0.0.0.0';\n            var ifaces = _os2.default.networkInterfaces();\n            var keys = Object.keys(ifaces);\n            loop1: for (var i = 0; i < keys.length; i++) {\n                var iface = ifaces[keys[i]];\n                for (var j = 0; j < iface.length; j++) {\n                    if (iface[j].family === 'IPv4' && !iface[j].internal) {\n                        myIp = iface[j].address;\n                        break loop1;\n                    }\n                }\n            }\n            return myIp;\n        }\n    }, {\n        key: 'clone',\n        value: function clone(obj) {\n            var newObj = {};\n            for (var key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    newObj[key] = obj[key];\n                }\n            }\n\n            return newObj;\n        }\n    }, {\n        key: 'convertObjectToTags',\n        value: function convertObjectToTags(dict) {\n            var tags = [];\n            for (var key in dict) {\n                var value = dict[key];\n                if (dict.hasOwnProperty(key)) {\n                    tags.push({ 'key': key, 'value': value });\n                }\n            }\n\n            return tags;\n        }\n    }]);\n\n    return Utils;\n}();\n\nexports.default = Utils;\n//# sourceMappingURL=util.js.map\n//# sourceMappingURL=util.js.map"]}